// Auto-generated by mernpkg
const { contextBridge, ipcRenderer } = require('electron');

contextBridge.exposeInMainWorld('electronAPI', {
  openExternal: (url) => ipcRenderer.send('open-external', url),
  getDesktopSession: () => ipcRenderer.invoke('saarthi-desktop-get-session'),
  showSplash: () => ipcRenderer.invoke('saarthi-desktop-show-splash'),
  onDesktopSession: (callback) => {
    if (typeof callback !== 'function') {
      return () => {};
    }
    const handler = (_event, payload) => callback(payload);
    ipcRenderer.on('saarthi-desktop-session', handler);
    return () => ipcRenderer.removeListener('saarthi-desktop-session', handler);
  }
});

console.log('Electron preload script loaded successfully');
